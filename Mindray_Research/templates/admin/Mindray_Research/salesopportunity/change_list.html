{% extends "admin/change_list.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrahead %}
    {{ block.super }}
    <!-- ä½¿ç”¨ç¨³å®šç‰ˆæœ¬çš„Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <style>
        .stats-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .stat-item:hover {
            transform: translateY(-5px) scale(1.05);
            background: rgba(255, 255, 255, 0.25);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* å›¾è¡¨å®¹å™¨ - è°ƒæ•´TOPåŒ»é™¢æ¨¡å—å˜çª„ */
        .charts-container {
            margin-top: 2rem;
            display: grid;
            grid-template-columns: 1fr 1.4fr 1.5fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .chart-item {
            background: #fff;
            border: none;
            border-radius: 16px;
            padding: 2rem;
            min-height: 450px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .chart-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }
        
        .chart-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .chart-title {
            font-size: 1.4rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
            text-align: center;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }
        
        /* ä¿®æ”¹å›¾è¡¨å®¹å™¨æ ·å¼ï¼Œç¡®ä¿ç¯å½¢å›¾æ˜¯æ­£åœ† */
        .chart-canvas {
            width: 100% !important;
            height: 320px !important;
            max-width: 320px;
            margin: 0 auto;
        }
        
        /* ç¯å½¢å›¾ç‰¹æ®Šå¤„ç† */
        .doughnut-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 320px;
        }
        
        #projectChart {
            max-width: 280px !important;
            max-height: 280px !important;
            width: 280px !important;
            height: 280px !important;
        }
        
        /* TOPåŒ»é™¢æ’åæ ·å¼ - ä¼˜åŒ–æ¡Œé¢ç«¯å¯¹é½ */
        .ranking-list {
            margin-top: 1rem;
            max-height: 380px;
            overflow-y: auto;
        }
        
        .ranking-item {
            display: flex;
            align-items: center;  /* å‚ç›´å±…ä¸­å¯¹é½ */
            padding: 1rem 1.2rem;
            margin-bottom: 0.8rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            border: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
            min-height: 50px;  /* å›ºå®šæœ€å°é«˜åº¦ç¡®ä¿ä¸€è‡´æ€§ */
        }
        
        .ranking-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .ranking-item:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            transform: translateX(6px) scale(1.01);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        
        .ranking-item:nth-child(1)::before { background: linear-gradient(135deg, #ffd700, #ffed4e); }
        .ranking-item:nth-child(2)::before { background: linear-gradient(135deg, #c0c0c0, #e5e5e5); }
        .ranking-item:nth-child(3)::before { background: linear-gradient(135deg, #cd7f32, #deb887); }
        
        /* æ¡Œé¢ç«¯æ’åæ•°å­— - å›ºå®šå®½åº¦ï¼Œå±…ä¸­å¯¹é½ */
        .ranking-number {
            font-weight: 700;
            color: #667eea;
            width: 35px;        /* å›ºå®šå®½åº¦ */
            text-align: center; /* å±…ä¸­å¯¹é½ */
            font-size: 1.1rem;
            flex-shrink: 0;     /* ä¸æ”¶ç¼© */
        }
        
        /* æ¡Œé¢ç«¯åŒ»é™¢åç§° - å·¦å¯¹é½ï¼Œå æ®å‰©ä½™ç©ºé—´ */
        .ranking-hospital {
            flex: 1;            /* å æ®å‰©ä½™ç©ºé—´ */
            font-weight: 600;
            color: #333;
            font-size: 1rem;
            line-height: 1.4;
            text-align: left;   /* å·¦å¯¹é½ */
            padding: 0 1rem;    /* å·¦å³padding */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        /* æ¡Œé¢ç«¯åœ°åŒº - å›ºå®šå®½åº¦ï¼Œå±…ä¸­å¯¹é½ */
        .ranking-district {
            color: #6c757d;
            font-size: 0.85rem;
            font-style: italic;
            width: 90px;        /* å›ºå®šå®½åº¦ */
            text-align: center; /* å±…ä¸­å¯¹é½ */
            flex-shrink: 0;     /* ä¸æ”¶ç¼© */
        }
        
        /* æ¡Œé¢ç«¯æ•°é‡ - å›ºå®šå®½åº¦ï¼Œå±…ä¸­å¯¹é½ */
        .ranking-count {
            color: #667eea;
            font-weight: 700;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 1rem;
            width: 70px;        /* å›ºå®šå®½åº¦ */
            text-align: center; /* å±…ä¸­å¯¹é½ */
            flex-shrink: 0;     /* ä¸æ”¶ç¼© */
        }
        
        /* éšè—æ‰‹æœºç‰ˆå¸ƒå±€å…ƒç´ ï¼ˆæ¡Œé¢ç«¯ï¼‰ */
        .ranking-main,
        .ranking-meta {
            display: none;
        }
        
        /* è°ƒè¯•ä¿¡æ¯æ ·å¼ */
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        /* å“åº”å¼è®¾è®¡ - å¹³æ¿å’Œå¤§å±æ‰‹æœº */
        @media (max-width: 1200px) {
            .charts-container {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            /* å¹³æ¿æ¨¡å¼ä¸‹ä¿æŒæ¡Œé¢ç«¯å¸ƒå±€ä½†è°ƒæ•´å°ºå¯¸ */
            .ranking-item {
                padding: 1.2rem 1.5rem;
                font-size: 1rem;
                min-height: 55px;
            }
            
            .ranking-number {
                width: 40px;
                font-size: 1.2rem;
            }
            
            .ranking-hospital {
                font-size: 1.1rem;
                padding: 0 1.2rem;
            }
            
            .ranking-district {
                font-size: 0.9rem;
                width: 100px;
            }
            
            .ranking-count {
                font-size: 1.05rem;
                width: 75px;
            }
        }
        
        /* æ‰‹æœºæ¨¡å¼ - åŒ»é™¢åç§°è‡ªåŠ¨æ¢è¡Œ */
        @media (max-width: 768px) {
            /* éšè—æ¡Œé¢ç‰ˆå…ƒç´  */
            .ranking-item > .ranking-number,
            .ranking-item > .ranking-hospital,
            .ranking-item > .ranking-district,
            .ranking-item > .ranking-count {
                display: none;
            }
            
            /* æ˜¾ç¤ºæ‰‹æœºç‰ˆå¸ƒå±€ */
            .ranking-main,
            .ranking-meta {
                display: flex !important;
            }
            
            .ranking-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 1rem;
                min-height: auto;
                gap: 0.5rem;
            }
            
            .ranking-item::before {
                width: 100%;
                height: 3px;
                top: 0;
                left: 0;
                right: 0;
                bottom: auto;
            }
            
            /* ç¬¬ä¸€è¡Œï¼šæ’åå’ŒåŒ»é™¢å */
            .ranking-main {
                align-items: flex-start;
                width: 100%;
                gap: 1rem;
            }
            
            .ranking-main .ranking-number {
                width: 25px;
                font-size: 1.2rem;
                text-align: left;
                flex-shrink: 0;
            }
            
            .ranking-main .ranking-hospital {
                flex: 1;
                font-size: 1.05rem;
                line-height: 1.3;
                word-break: break-word;
                hyphens: auto;
                padding: 0;
                text-align: left;
            }
            
            /* ç¬¬äºŒè¡Œï¼šåŒºåŸŸå’Œæ•°é‡ */
            .ranking-meta {
                justify-content: space-between;
                align-items: center;
                width: 100%;
                margin-left: 35px;  /* ä¸åŒ»é™¢åå¯¹é½ */
            }
            
            .ranking-meta .ranking-district {
                width: auto;
                flex: 1;
                font-size: 0.9rem;
                text-align: left;
            }
            
            .ranking-meta .ranking-count {
                width: 55px;
                padding: 0.4rem 0.8rem;
                font-size: 0.95rem;
            }
            
            /* è°ƒæ•´hoveræ•ˆæœ */
            .ranking-item:hover {
                transform: translateY(-2px) scale(1.01);
                transform-origin: center;
            }
        }
        
        /* è¶…å°å±å¹•ä¼˜åŒ– */
        @media (max-width: 480px) {
            .chart-item {
                padding: 1.5rem;
            }
            
            .ranking-main .ranking-hospital {
                font-size: 1rem;
            }
            
            .ranking-meta {
                margin-left: 30px;
            }
            
            .ranking-main .ranking-number {
                width: 22px;
                font-size: 1.1rem;
            }
        }
    </style>
{% endblock %}

{% block content_title %}
    <h1 style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800;">
        ğŸ“Š é”€å”®å•†æœºç®¡ç†
        {% if is_salesperson %}
            <small style="color: #6c757d; font-weight: normal;">ï¼ˆæˆ‘çš„å•†æœºï¼‰</small>
        {% endif %}
    </h1>
    
    <div class="stats-container">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-number">{{ total_count }}</div>
                <div class="stat-label">å•†æœºæ€»æ•°</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ this_week_count }}</div>
                <div class="stat-label">æœ¬å‘¨æ–°å¢</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ last_week_count }}</div>
                <div class="stat-label">ä¸Šå‘¨æ–°å¢</div>
            </div>
        </div>
        
        <!-- å›¾è¡¨å®¹å™¨ -->
        <div class="charts-container">
            <!-- 1. é¡¹ç›®åˆ†å¸ƒé¥¼å›¾ -->
            <div class="chart-item">
                <div class="chart-title">ğŸ¯ å•†æœºé¡¹ç›®åˆ†å¸ƒ</div>
                <div class="doughnut-container">
                    <canvas id="projectChart"></canvas>
                </div>
            </div>
            
            <!-- 2. Top10åŒ»é™¢æ’ååˆ—è¡¨ -->
            <div class="chart-item">
                <div class="chart-title">ğŸ† å•†æœºæ•° Top10 åŒ»é™¢</div>
                <div class="ranking-list">
                    {% for hospital in top_hospitals_list %}
                    <div class="ranking-item">
                        <!-- æ¡Œé¢ç‰ˆå¸ƒå±€ -->
                        <span class="ranking-number">{{ hospital.rank }}</span>
                        <span class="ranking-hospital">{{ hospital.hospital_name }}</span>
                        <span class="ranking-district">({{ hospital.district }})</span>
                        <span class="ranking-count">{{ hospital.count }} ä¸ª</span>
                        
                        <!-- æ‰‹æœºç‰ˆå¸ƒå±€ç»“æ„ -->
                        <div class="ranking-main">
                            <span class="ranking-number">{{ hospital.rank }}</span>
                            <span class="ranking-hospital">{{ hospital.hospital_name }}</span>
                        </div>
                        <div class="ranking-meta">
                            <span class="ranking-district">({{ hospital.district }})</span>
                            <span class="ranking-count">{{ hospital.count }} ä¸ª</span>
                        </div>
                    </div>
                    {% endfor %}
                    {% if not top_hospitals_list %}
                    <div style="text-align: center; color: #6c757d; padding: 3rem; font-style: italic;">
                        ğŸ“­ æš‚æ— æ•°æ®
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- 3. é”€å”®æ’è¡Œ -->
            <div class="chart-item">
                <div class="chart-title">ğŸ‘¨â€ğŸ’¼ é”€å”®å•†æœºæ•°æ’è¡Œ</div>
                <canvas id="salespersonChart" class="chart-canvas"></canvas>
            </div>
        </div>
    </div>
    
    <script>
        // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½
        window.addEventListener('load', function() {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–å›¾è¡¨...');
            
            // æ£€æŸ¥Chart.jsæ˜¯å¦åŠ è½½
            if (typeof Chart === 'undefined') {
                console.error('Chart.jsæœªåŠ è½½');
                return;
            }
            
            console.log('Chart.jså·²åŠ è½½ï¼Œç‰ˆæœ¬:', Chart.version);
            
            // ä»Djangoæ¨¡æ¿è·å–æ•°æ®
            var projectData = {{ project_chart_data|safe }};
            var projectLabels = {{ project_chart_labels|safe }};
            var salespersonNames = {{ salesperson_names|safe }};
            var salespersonCounts = {{ salesperson_counts|safe }};
            
            console.log('è·å–åˆ°çš„æ•°æ®:', { projectData, projectLabels, salespersonNames, salespersonCounts });
            
            // 1. åˆ›å»ºé¡¹ç›®åˆ†å¸ƒç¯å½¢å›¾ - ä½¿ç”¨ç°ä»£åŒ–é…è‰²
            var projectCanvas = document.getElementById('projectChart');
            if (projectCanvas && projectData.length > 0) {
                console.log('å¼€å§‹åˆ›å»ºé¡¹ç›®åˆ†å¸ƒå›¾...');
                try {
                    // ç°ä»£åŒ–æ¸å˜é…è‰²æ–¹æ¡ˆ
                    const modernColors = [
                        '#667eea',  // æ·±è“ç´«
                        '#f093fb',  // ç²‰ç´«è‰²
                        '#4facfe',  // å¤©è“è‰²
                        '#43e97b',  // ç¿ ç»¿è‰²
                        '#fa709a',  // çŠç‘šç²‰
                        '#fee140',  // é‡‘é»„è‰²
                        '#a8edea',  // è–„è·ç»¿
                        '#d299c2',  // æ·¡ç´«è‰²
                        '#ffecd2',  // æ·¡æ©™è‰²
                        '#c2e59c'   // å«©ç»¿è‰²
                    ];
                    
                    // ç¡®ä¿æœ‰è¶³å¤Ÿçš„é¢œè‰²
                    const chartColors = projectData.map((_, index) => modernColors[index % modernColors.length]);
                    
                    var projectChart = new Chart(projectCanvas, {
                        type: 'doughnut',
                        data: {
                            labels: projectLabels,
                            datasets: [{
                                data: projectData,
                                backgroundColor: chartColors,
                                borderColor: '#ffffff',
                                borderWidth: 3,
                                hoverBorderWidth: 5,
                                hoverOffset: 8
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: true,
                            aspectRatio: 1,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        padding: 20,
                                        usePointStyle: true,
                                        pointStyle: 'circle',
                                        font: {
                                            family: "'Inter', 'Helvetica Neue', Arial, sans-serif",
                                            size: 13,
                                            weight: '600'
                                        },
                                        color: '#2d3748',
                                        generateLabels: function(chart) {
                                            const data = chart.data;
                                            if (data.labels.length && data.datasets.length) {
                                                return data.labels.map((label, i) => {
                                                    const dataset = data.datasets[0];
                                                    const value = dataset.data[i];
                                                    const total = dataset.data.reduce((a, b) => a + b, 0);
                                                    const percentage = ((value / total) * 100).toFixed(1);
                                                    return {
                                                        text: `${label} (${percentage}%)`,
                                                        fillStyle: dataset.backgroundColor[i],
                                                        strokeStyle: dataset.borderColor,
                                                        lineWidth: dataset.borderWidth,
                                                        pointStyle: 'circle',
                                                        hidden: false,
                                                        index: i
                                                    };
                                                });
                                            }
                                            return [];
                                        }
                                    }
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(45, 55, 72, 0.95)',
                                    titleColor: '#ffffff',
                                    bodyColor: '#ffffff',
                                    borderColor: '#667eea',
                                    borderWidth: 2,
                                    cornerRadius: 12,
                                    titleFont: {
                                        family: "'Inter', 'Helvetica Neue', Arial, sans-serif",
                                        size: 14,
                                        weight: '700'
                                    },
                                    bodyFont: {
                                        family: "'Inter', 'Helvetica Neue', Arial, sans-serif",
                                        size: 13,
                                        weight: '500'
                                    },
                                    callbacks: {
                                        title: function(context) {
                                            return 'ğŸ“Š ' + context[0].label;
                                        },
                                        label: function(context) {
                                            var value = context.parsed || 0;
                                            var total = context.dataset.data.reduce((a, b) => a + b, 0);
                                            var percentage = total > 0 ? ((value / total) * 100).toFixed(1) : 0;
                                            return [
                                                `æ•°é‡: ${value} ä¸ª`,
                                                `å æ¯”: ${percentage}%`
                                            ];
                                        }
                                    }
                                }
                            },
                            cutout: '65%',
                            animation: {
                                animateScale: true,
                                animateRotate: true,
                                duration: 1500,
                                easing: 'easeOutQuart'
                            }
                        }
                    });
                    console.log('é¡¹ç›®åˆ†å¸ƒå›¾åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºé¡¹ç›®åˆ†å¸ƒå›¾å¤±è´¥:', error);
                }
            } else {
                console.log('é¡¹ç›®åˆ†å¸ƒå›¾ï¼šæ— æ•°æ®æˆ–canvasä¸å­˜åœ¨');
            }
            
            // 2. åˆ›å»ºé”€å”®æ’è¡ŒæŸ±çŠ¶å›¾ - ç°ä»£æ¸å˜æ ·å¼
            var salespersonCanvas = document.getElementById('salespersonChart');
            if (salespersonCanvas && salespersonCounts.length > 0) {
                console.log('å¼€å§‹åˆ›å»ºé”€å”®æ’è¡Œå›¾...');
                try {
                    var ctx = salespersonCanvas.getContext('2d');
                    
                    // ç°ä»£åŒ–æ¸å˜é…è‰²
                    const gradientColors = [
                        { start: '#667eea', end: '#764ba2' },
                        { start: '#f093fb', end: '#f5576c' },
                        { start: '#4facfe', end: '#00f2fe' },
                        { start: '#43e97b', end: '#38f9d7' },
                        { start: '#fa709a', end: '#fee140' },
                        { start: '#a8edea', end: '#fed6e3' },
                        { start: '#ff9a9e', end: '#fecfef' },
                        { start: '#a18cd1', end: '#fbc2eb' },
                        { start: '#ffecd2', end: '#fcb69f' },
                        { start: '#c2e59c', end: '#64b3f4' }
                    ];
                    
                    // åˆ›å»ºæ¸å˜è‰²
                    var backgroundColors = [];
                    var borderColors = [];
                    
                    for (var i = 0; i < salespersonCounts.length; i++) {
                        var gradient = ctx.createLinearGradient(0, 0, 0, 400);
                        var colors = gradientColors[i % gradientColors.length];
                        gradient.addColorStop(0, colors.start);
                        gradient.addColorStop(1, colors.end);
                        backgroundColors.push(gradient);
                        borderColors.push(colors.start);
                    }
                    
                    var salespersonChart = new Chart(salespersonCanvas, {
                        type: 'bar',
                        data: {
                            labels: salespersonNames,
                            datasets: [{
                                label: 'å•†æœºæ•°é‡',
                                data: salespersonCounts,
                                backgroundColor: backgroundColors,
                                borderColor: borderColors,
                                borderWidth: 2,
                                borderRadius: {
                                    topLeft: 12,
                                    topRight: 12,
                                    bottomLeft: 4,
                                    bottomRight: 4
                                },
                                borderSkipped: false,
                                hoverBorderWidth: 3,
                                hoverBackgroundColor: backgroundColors
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(45, 55, 72, 0.95)',
                                    titleColor: '#ffffff',
                                    bodyColor: '#ffffff',
                                    borderColor: '#667eea',
                                    borderWidth: 2,
                                    cornerRadius: 12,
                                    titleFont: {
                                        family: "'Inter', 'Helvetica Neue', Arial, sans-serif",
                                        size: 14,
                                        weight: '700'
                                    },
                                    bodyFont: {
                                        family: "'Inter', 'Helvetica Neue', Arial, sans-serif",
                                        size: 13,
                                        weight: '500'
                                    },
                                    callbacks: {
                                        title: function(context) {
                                            return 'ğŸ‘¨â€ğŸ’¼ ' + context[0].label;
                                        },
                                        label: function(context) {
                                            return `å•†æœºæ•°é‡: ${context.parsed.y} ä¸ª`;
                                        }
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        stepSize: 1,
                                        font: {
                                            family: "'Inter', 'Helvetica Neue', Arial, sans-serif",
                                            size: 12,
                                            weight: '500'
                                        },
                                        color: '#4a5568'
                                    },
                                    grid: {
                                        color: 'rgba(0, 0, 0, 0.08)',
                                        lineWidth: 1
                                    }
                                },
                                x: {
                                    ticks: {
                                        maxRotation: 45,
                                        font: {
                                            family: "'Inter', 'Helvetica Neue', Arial, sans-serif",
                                            size: 11,
                                            weight: '600'
                                        },
                                        color: '#2d3748'
                                    },
                                    grid: {
                                        display: false
                                    }
                                }
                            },
                            animation: {
                                duration: 1500,
                                easing: 'easeOutQuart'
                            },
                            interaction: {
                                intersect: false,
                                mode: 'index'
                            }
                        }
                    });
                    console.log('é”€å”®æ’è¡Œå›¾åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºé”€å”®æ’è¡Œå›¾å¤±è´¥:', error);
                }
            } else {
                console.log('é”€å”®æ’è¡Œå›¾ï¼šæ— æ•°æ®æˆ–canvasä¸å­˜åœ¨');
            }
            
            console.log('å›¾è¡¨åˆå§‹åŒ–å®Œæˆ');
        });
    </script>
{% endblock %}

{% block content %}
    {{ block.super }}
{% endblock %}